CVSTracNT 插件开发说明 
=====================

CnPack 开发组 周劲羽
http://www.cnpack.org

一、插件介绍
------------

从 1.1.5 Build 20050408 版本起，CVSTracNT 提供了一套简单的插件机制，来支持可扩充的任务单更新通知方式。

该插件系统主要有以下特点：
1、插件同时被 CVSTracNT 配置程序和任务单更新通知器程序调用。在配置程序中，调用插件的配置功能，对插件本身及各个数据库进行参数配置。在更新通知主程序中，调用插件来执行实际的通知操作，调用时会传入任务单的相关信息。
2、插件可以用多种Win32开发工具编写，目前提供了 Delphi 和 VC 的接口和示例。已发布的插件都使用 Delphi 编写。
3、提供了插件随主程序进行多语言切换的支持。

二、插件开发
------------

使用 Delphi 开发插件，可以参考 Source\CTMailer 等现有插件的源码。

使用 VC 开发插件，可以参考 Plugins\VCDemo 的例子。

三、插件调试
------------

先设置插件的编译输出目录为 Bin 目录。

要调试插件的设置部分，可以将 Host 程序设置成 Bin\CVSTracOption.exe，无参数。

要调试插件的发送功能，可以将 Host 程序设置成 Bin\CTSender.exe，参数为 数据库名 任务单编号 修改人 -Exec，例如：
CTSender.exe dbname 1 user -Exec
注：-Exec 是 CTSender 用来启动一个新实例执行发送操作时使用的标志，以避免用户提交任务单后长时间等待。